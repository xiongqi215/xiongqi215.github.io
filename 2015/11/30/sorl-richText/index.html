<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Solr-富文本索引 · 非典型性程序猿</title><meta name="description" content="Solr-富文本索引 - Justin"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://www.justin-x.cn/atom.xml" title="非典型性程序猿"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/justin890215" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/xiongqi215" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">Solr-富文本索引</h1><div class="post-info">Nov 30, 2015</div><div class="post-content"><p>Solr支持从富文本文件中，如pdf,word中抽取内容建立索引。</p>
<p>首先，需要配置支持这一功能的requestHandler。编辑<code>solrconfig.xml</code>,加入：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">requestHandler</span> <span class="attr">name</span>=<span class="string">"/update/extract"</span> 	<span class="attr">class</span>=<span class="string">"solr.extraction.ExtractingRequestHandler"</span> &gt;</span>  </div><div class="line">   <span class="tag">&lt;<span class="name">lst</span> <span class="attr">name</span>=<span class="string">"defaults"</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">str</span> <span class="attr">name</span>=<span class="string">"fmap.content"</span>&gt;</span>content<span class="tag">&lt;/<span class="name">str</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">str</span> <span class="attr">name</span>=<span class="string">"fmap.Content-Type"</span>&gt;</span>Content-Type<span class="tag">&lt;/<span class="name">str</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">str</span> <span class="attr">name</span>=<span class="string">"uprefix"</span>&gt;</span>ignored_<span class="tag">&lt;/<span class="name">str</span>&gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="name">lst</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">lst</span> <span class="attr">name</span>=<span class="string">"date.formats"</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">str</span>&gt;</span>yyyy-MM-dd<span class="tag">&lt;/<span class="name">str</span>&gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="name">lst</span>&gt;</span></div><div class="line"> <span class="tag">&lt;/<span class="name">requestHandler</span>&gt;</span></div></pre></td></tr></table></figure></p>
<a id="more"></a>
<p><strong>solr.extraction.ExtractingRequestHandler</strong>就是solr中用来处理富文本的handler。为了使用这个类我们我们需要拷贝jar包：<strong>solr-dataimporthandler-extras.jar</strong>到lib目录，并确认<strong>solrconfig.xml</strong>中的lib配置包含它。</p>
<div class="alert alert-info" role="info"><br>ExtractingRequestHandler底层实际是使用apache Tika进行文件内容抽取的，<br></div>

<p><strong>配置解释：</strong></p>
<ul>
<li><p><code>&lt;requestHandler name=&quot;/update/extract&quot; class=&quot;solr.extraction.ExtractingRequestHandler&quot; &gt;</code>：其中name=<code>update/extract</code>为改request的请求路径。</p>
</li>
<li><p><code>fmap.xxx</code> 为从文件中抽取的内容，意见这些内容如何存储。如在这里：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">str</span> <span class="attr">name</span>=<span class="string">"fmap.content"</span>&gt;</span>content<span class="tag">&lt;/<span class="name">str</span>&gt;</span>  <span class="comment">&lt;!--文件内容--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">str</span> <span class="attr">name</span>=<span class="string">"fmap.Content-Type"</span>&gt;</span>Content-Type<span class="tag">&lt;/<span class="name">str</span>&gt;</span> <span class="comment">&lt;!--文件类型--&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>官方文档关于<code>fmap</code>的描述：<br><img src="http://i.imgur.com/fsmATZQ.png" alt=""></p>
<p>意思很简单就是字段的映射。</p>
<ul>
<li><code>uprefix</code> 这个配置用于将文件中其它不需要的内容统一加上指定前缀，如这里加上了ignored_。在schema.xml中有该字段与类型配置：<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">dynamicField</span> <span class="attr">name</span>=<span class="string">"ignored_*"</span> <span class="attr">type</span>=<span class="string">"ignored"</span> <span class="attr">multiValued</span>=<span class="string">"true"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">fieldType</span> <span class="attr">name</span>=<span class="string">"ignored"</span> <span class="attr">stored</span>=<span class="string">"false"</span> <span class="attr">indexed</span>=<span class="string">"false"</span> <span class="attr">multiValued</span>=<span class="string">"true"</span> <span class="attr">class</span>=<span class="string">"solr.StrField"</span> /&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>这是个动态字段，即所有以<code>ignored_</code>开头的字段都按<code>ignored</code>这个<code>type</code>处理。在这达到的忽略这些数据的目的。</p>
<p><strong>调用/update/extract完成文件索引</strong></p>
<p>调用/update/extrac的方式有很多种，下面介绍使用solr4j api在java工程里调用：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//建立客户端连接</span></div><div class="line">SolrClient client=<span class="keyword">new</span> HttpSolrClient(<span class="string">"http://localhost:8080/solr/core1"</span>);</div><div class="line"></div><div class="line"><span class="comment">//单个文件索引</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">indexFromFile</span><span class="params">(String fileName,String id)</span> <span class="keyword">throws</span> Exception</span>&#123;</div><div class="line">        <span class="comment">//ContentStreamUpdateRequest 是专门用来提交文件的</span></div><div class="line">		ContentStreamUpdateRequest  request=<span class="keyword">new</span> ContentStreamUpdateRequest(<span class="string">"/update/extract"</span>);</div><div class="line">		String contentType=<span class="string">"application/text"</span>;</div><div class="line">		</div><div class="line">		request.addFile(<span class="keyword">new</span> File(fileName), contentType);</div><div class="line">       <span class="comment">//literal.xxx 文件以外的字段，xxx将直接映射到schema.xml中的同名字段</span></div><div class="line">		request.setParam(<span class="string">"literal.id"</span>, String.valueOf(id));  </div><div class="line">		request.setParam(<span class="string">"literal.author"</span>, author);  </div><div class="line">		request.setParam(<span class="string">"literal.title"</span>, tilte);  </div><div class="line"></div><div class="line">		request.setAction(AbstractUpdateRequest.ACTION.OPTIMIZE, <span class="keyword">true</span>, <span class="keyword">true</span>);   </div><div class="line">		client.request(request);</div><div class="line">		</div><div class="line">		client.commit();</div><div class="line">	    </div><div class="line">	&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span>  </span>&#123;</div><div class="line">		<span class="keyword">try</span>&#123;</div><div class="line">		SolrMananger client=<span class="keyword">new</span> SolrMananger();</div><div class="line">		client.indexFromFile(<span class="string">"e:/apache-solr-ref-guide-5.3.pdf"</span>, <span class="number">1</span>, <span class="string">"Justn"</span>, <span class="string">"solr-ref"</span>);</div><div class="line">		&#125;<span class="keyword">catch</span>(Exception e)&#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">		&#125;</div></pre></td></tr></table></figure>
<p>运行后，查看solr控制台，使用query验证文件是否成功索引。<br><img src="http://i.imgur.com/NbapUSN.png" alt=""><br>可以看到查询结果，且各个字段的值都与预想一样。</p>
<p>关于批量文件生成索引，需要注意性能问题，应做到：</p>
<p>原文：<a href="http://my.oschina.net/u/1403753/blog/468439" target="_blank" rel="external">http://my.oschina.net/u/1403753/blog/468439</a></p>
<ul>
<li><code>client.commit();</code>操作应该放在最外层，即最后提交一次。</li>
<li>不设置action。</li>
<li><p>一个文件一个ContentStreamUpdateRequest对象，否则会造成contentStream递增，从而影响效率。</p>
<p>代码如下：</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">SolrClient client=<span class="keyword">new</span> HttpSolrClient(<span class="string">"http://localhost:8080/solr/core1"</span>);</div><div class="line">ContentStreamUpdateRequest request;</div><div class="line"><span class="keyword">for</span>(File file:files)&#123;</div><div class="line">    request=<span class="keyword">new</span> ContentStreamUpdateRequest(<span class="string">"/update/extract"</span>);</div><div class="line">    request.addFile(<span class="keyword">new</span> File(<span class="string">"mailing_lists.pdf"</span>));</div><div class="line">    request.setParam(<span class="string">"literal.id"</span>, <span class="string">"mailing_lists.pdf"</span>);</div><div class="line">    <span class="comment">//request.setAction(AbstractUpdateRequest.ACTION.COMMIT, true, true);//注释这行代码。</span></div><div class="line">    client.request(request);</div><div class="line">&#125; </div><div class="line">client.commit();</div></pre></td></tr></table></figure>
<p>schemal.xml:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">schema</span> <span class="attr">name</span>=<span class="string">"sjsmhp"</span> <span class="attr">version</span>=<span class="string">"1.5"</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">uniqueKey</span>&gt;</span>id<span class="tag">&lt;/<span class="name">uniqueKey</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"id"</span> <span class="attr">type</span>=<span class="string">"long"</span> <span class="attr">indexed</span>=<span class="string">"true"</span> <span class="attr">stored</span>=<span class="string">"true"</span> <span class="attr">required</span>=<span class="string">"true"</span> <span class="attr">multiValued</span>=<span class="string">"false"</span> &gt;</span><span class="tag">&lt;/<span class="name">field</span>&gt;</span> </div><div class="line">   <span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"content"</span> <span class="attr">type</span>=<span class="string">"text_general"</span> <span class="attr">indexed</span>=<span class="string">"true"</span>  <span class="attr">stored</span>=<span class="string">"true"</span>  <span class="attr">omitNorms</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">field</span>&gt;</span> </div><div class="line">   <span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"author"</span> <span class="attr">type</span>=<span class="string">"text_general"</span> <span class="attr">indexed</span>=<span class="string">"true"</span> <span class="attr">stored</span>=<span class="string">"true"</span> &gt;</span><span class="tag">&lt;/<span class="name">field</span>&gt;</span> </div><div class="line">   <span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"title"</span> <span class="attr">type</span>=<span class="string">"text_general"</span> <span class="attr">indexed</span>=<span class="string">"true"</span> <span class="attr">stored</span>=<span class="string">"true"</span> &gt;</span><span class="tag">&lt;/<span class="name">field</span>&gt;</span> </div><div class="line">   <span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"docType"</span> <span class="attr">type</span>=<span class="string">"string"</span> <span class="attr">indexed</span>=<span class="string">"true"</span> <span class="attr">stored</span>=<span class="string">"true"</span> &gt;</span><span class="tag">&lt;/<span class="name">field</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"Content-Type"</span> <span class="attr">type</span>=<span class="string">"string"</span> <span class="attr">indexed</span>=<span class="string">"false"</span> <span class="attr">stored</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">field</span>&gt;</span> </div><div class="line">   <span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"last_modified"</span> <span class="attr">type</span>=<span class="string">"date"</span> <span class="attr">indexed</span>=<span class="string">"true"</span> <span class="attr">stored</span>=<span class="string">"true"</span>  &gt;</span><span class="tag">&lt;/<span class="name">field</span>&gt;</span>  </div><div class="line">   <span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"_version_"</span> <span class="attr">type</span>=<span class="string">"long"</span> <span class="attr">indexed</span>=<span class="string">"true"</span> <span class="attr">stored</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">field</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">field</span> <span class="attr">name</span>=<span class="string">"_root_"</span> <span class="attr">type</span>=<span class="string">"string"</span> <span class="attr">indexed</span>=<span class="string">"true"</span> <span class="attr">stored</span>=<span class="string">"false"</span>&gt;</span><span class="tag">&lt;/<span class="name">field</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">dynamicField</span> <span class="attr">name</span>=<span class="string">"ignored_*"</span> <span class="attr">type</span>=<span class="string">"ignored"</span> <span class="attr">multiValued</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">dynamicField</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">fieldType</span> <span class="attr">name</span>=<span class="string">"string"</span> <span class="attr">class</span>=<span class="string">"solr.StrField"</span> <span class="attr">sortMissingLast</span>=<span class="string">"true"</span> &gt;</span><span class="tag">&lt;/<span class="name">fieldType</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">fieldType</span> <span class="attr">name</span>=<span class="string">"boolean"</span> <span class="attr">class</span>=<span class="string">"solr.BoolField"</span> <span class="attr">sortMissingLast</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">fieldType</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">fieldType</span> <span class="attr">name</span>=<span class="string">"int"</span> <span class="attr">class</span>=<span class="string">"solr.TrieIntField"</span> <span class="attr">precisionStep</span>=<span class="string">"0"</span> <span class="attr">positionIncrementGap</span>=<span class="string">"0"</span> &gt;</span><span class="tag">&lt;/<span class="name">fieldType</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">fieldType</span> <span class="attr">name</span>=<span class="string">"float"</span> <span class="attr">class</span>=<span class="string">"solr.TrieFloatField"</span> <span class="attr">precisionStep</span>=<span class="string">"0"</span> <span class="attr">positionIncrementGap</span>=<span class="string">"0"</span>&gt;</span><span class="tag">&lt;/<span class="name">fieldType</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">fieldType</span> <span class="attr">name</span>=<span class="string">"long"</span> <span class="attr">class</span>=<span class="string">"solr.TrieLongField"</span> <span class="attr">precisionStep</span>=<span class="string">"0"</span> <span class="attr">positionIncrementGap</span>=<span class="string">"0"</span>&gt;</span><span class="tag">&lt;/<span class="name">fieldType</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">fieldType</span> <span class="attr">name</span>=<span class="string">"double"</span> <span class="attr">class</span>=<span class="string">"solr.TrieDoubleField"</span> <span class="attr">precisionStep</span>=<span class="string">"0"</span> <span class="attr">positionIncrementGap</span>=<span class="string">"0"</span>&gt;</span><span class="tag">&lt;/<span class="name">fieldType</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">fieldType</span> <span class="attr">name</span>=<span class="string">"date"</span> <span class="attr">class</span>=<span class="string">"solr.TrieDateField"</span> <span class="attr">precisionStep</span>=<span class="string">"0"</span> <span class="attr">positionIncrementGap</span>=<span class="string">"0"</span>&gt;</span><span class="tag">&lt;/<span class="name">fieldType</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">fieldType</span> <span class="attr">name</span>=<span class="string">"ignored"</span> <span class="attr">stored</span>=<span class="string">"false"</span> <span class="attr">indexed</span>=<span class="string">"false"</span> <span class="attr">multiValued</span>=<span class="string">"true"</span> <span class="attr">class</span>=<span class="string">"solr.StrField"</span> &gt;</span><span class="tag">&lt;/<span class="name">fieldType</span>&gt;</span></div><div class="line"></div><div class="line">   <span class="comment">&lt;!--中英文分词--&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">fieldType</span> <span class="attr">name</span>=<span class="string">"text_general"</span> <span class="attr">class</span>=<span class="string">"solr.TextField"</span> <span class="attr">positionIncrementGap</span>=<span class="string">"100"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">analyzer</span> <span class="attr">type</span>=<span class="string">"index"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">tokenizer</span> <span class="attr">class</span>=<span class="string">"solr.StandardTokenizerFactory"</span>&gt;</span><span class="tag">&lt;/<span class="name">tokenizer</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">"solr.StopFilterFactory"</span> <span class="attr">ignoreCase</span>=<span class="string">"true"</span> <span class="attr">words</span>=<span class="string">"stopwords.txt"</span> &gt;</span><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">"solr.LowerCaseFilterFactory"</span>&gt;</span><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">analyzer</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">analyzer</span> <span class="attr">type</span>=<span class="string">"query"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">tokenizer</span> <span class="attr">class</span>=<span class="string">"solr.StandardTokenizerFactory"</span>&gt;</span><span class="tag">&lt;/<span class="name">tokenizer</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">"solr.StopFilterFactory"</span> <span class="attr">ignoreCase</span>=<span class="string">"true"</span> <span class="attr">words</span>=<span class="string">"stopwords.txt"</span> &gt;</span><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">"solr.SynonymFilterFactory"</span> <span class="attr">synonyms</span>=<span class="string">"synonyms.txt"</span> <span class="attr">ignoreCase</span>=<span class="string">"true"</span> <span class="attr">expand</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">"solr.LowerCaseFilterFactory"</span>&gt;</span><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">analyzer</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">fieldType</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">schema</span>&gt;</span></div></pre></td></tr></table></figure></div></article></div></section><footer><div class="paginator"><a href="/2016/03/11/quit-smoking/" class="prev">上一篇</a><a href="/2015/11/22/sorl-envbuild/" class="next">下一篇</a></div><div data-thread-key="2015/11/30/sorl-richText/" data-title="Solr-富文本索引" data-url="http://www.justin-x.cn/2015/11/30/sorl-richText/" data-author-key="1" class="ds-thread"></div><script>var duoshuoQuery = {short_name:"Justin-Blog"};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
})();

</script><div class="copyright"><p><script>var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1260236137'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s11.cnzz.com/z_stat.php%3Fid%3D1260236137%26show%3Dpic' type='text/javascript'%3E%3C/script%3E")); </script>© 2015 - 2016 <a href="http://www.justin-x.cn">Justin</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a></p></div><script>(function(){
var bp = document.createElement('script');
var curProtocol = window.location.protocol.split(':')[0];
if (curProtocol === 'https') {
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
}
else {
   bp.src = 'http://push.zhanzhang.baidu.com/push.js';
}
var s = document.getElementsByTagName("script")[0];
s.parentNode.insertBefore(bp, s);
})();</script></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script></body></html>